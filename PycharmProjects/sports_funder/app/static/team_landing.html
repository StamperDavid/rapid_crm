<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support {{team_name}} - {{player_name}}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 25%, #fef2f2 75%, #fef2f2 100%);
            line-height: 1.6;
            color: #333;
        }
        
        .hero-section {
            background: linear-gradient(135deg, {{team_primary_color}} 0%, {{team_secondary_color}} 100%);
            color: white;
            padding: 60px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('{{team_logo_url}}') center/cover no-repeat;
            opacity: 0.1;
            z-index: 1;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .player-image {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 5px solid white;
            margin: 0 auto 20px;
            background: url('{{player_image_url}}') center/cover no-repeat;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        
        .hero-title {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            margin-bottom: 30px;
            opacity: 0.9;
        }
        
        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            min-width: 150px;
        }
        
        .btn-donate {
            background: #28a745;
            color: white;
        }
        
        .btn-donate:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        .btn-local {
            background: #007bff;
            color: white;
        }
        
        .btn-local:hover {
            background: #0056b3;
            transform: translateY(-2px);
        }
        
        .btn-store {
            background: #ffc107;
            color: #212529;
        }
        
        .btn-store:hover {
            background: #e0a800;
            transform: translateY(-2px);
        }
        
        .calendar-section {
            padding: 60px 20px;
            background: #f8f9fa;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section-title {
            font-size: 2.5rem;
            text-align: center;
            margin-bottom: 40px;
            color: #2c3e50;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .event-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border-left: 4px solid #007bff;
        }
        
        .event-date {
            font-size: 1.2rem;
            font-weight: bold;
            color: #007bff;
            margin-bottom: 10px;
        }
        
        .event-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #2c3e50;
        }
        
        .event-details {
            color: #6c757d;
            margin-bottom: 10px;
        }
        
        .event-location {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .local-businesses-section {
            padding: 60px 20px;
            background: white;
        }
        
        .businesses-carousel {
            display: flex;
            gap: 20px;
            overflow-x: auto;
            padding: 20px 0;
            scroll-behavior: smooth;
        }
        
        .business-logo {
            flex-shrink: 0;
            width: 120px;
            height: 120px;
            border-radius: 12px;
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .business-logo:hover {
            border-color: #007bff;
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,123,255,0.2);
        }
        
        .business-logo img {
            max-width: 80px;
            max-height: 80px;
            object-fit: contain;
        }
        
        .business-logo .placeholder {
            color: #6c757d;
            font-size: 0.8rem;
            text-align: center;
        }
        
        .local-explanation {
            background: #e3f2fd;
            border-radius: 12px;
            padding: 30px;
            margin: 40px 0;
            text-align: center;
        }
        
        .local-explanation h3 {
            color: #1976d2;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }
        
        .local-explanation p {
            color: #424242;
            font-size: 1.1rem;
            line-height: 1.8;
        }
        
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1.2rem;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-content">
            <div class="player-image"></div>
            <h1 class="hero-title">Support {{player_name}}</h1>
            <p class="hero-subtitle">{{team_name}} - {{sport}}</p>
            
            <div class="action-buttons">
                <a href="/donate/{{team_id}}" class="btn btn-donate">üí∞ Donate</a>
                <a href="/local/{{team_id}}" class="btn btn-local">üè™ Local</a>
                <a href="/store/{{team_id}}" class="btn btn-store">üõçÔ∏è Team Store</a>
            </div>
        </div>
    </section>
    
    <!-- Calendar Section -->
    <section class="calendar-section">
        <div class="container">
            <h2 class="section-title">üìÖ Upcoming Events</h2>
            <div class="calendar-grid" id="eventsGrid">
                <!-- Events will be loaded here -->
                <div class="event-card">
                    <div class="event-date">March 15, 2024</div>
                    <div class="event-title">Home Game vs. Rival High</div>
                    <div class="event-details">7:00 PM - Varsity Game</div>
                    <div class="event-location">üìç School Stadium</div>
                </div>
                <div class="event-card">
                    <div class="event-date">March 20, 2024</div>
                    <div class="event-title">Team Fundraiser</div>
                    <div class="event-details">6:00 PM - Community Event</div>
                    <div class="event-location">üìç School Cafeteria</div>
                </div>
                <div class="event-card">
                    <div class="event-date">March 25, 2024</div>
                    <div class="event-title">Away Game vs. Central High</div>
                    <div class="event-details">7:30 PM - Varsity Game</div>
                    <div class="event-location">üìç Central High Stadium</div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Local Businesses Section -->
    <section class="local-businesses-section">
        <div class="container">
            <h2 class="section-title">üè™ Local Business Partners</h2>
            
            <div class="local-explanation">
                <h3>Supporting Our Community</h3>
                <p>
                    These local businesses are proud supporters of {{team_name}}. 
                    When you use their services, you're not only getting great local service, 
                    but you're also helping support our team. Click on any business to learn more 
                    about their services and how they can help you!
                </p>
            </div>
            
            <div class="businesses-carousel" id="businessesCarousel">
                <!-- Business logos will be loaded here -->
                <div class="business-logo">
                    <div class="placeholder">Local<br>Restaurant</div>
                </div>
                <div class="business-logo">
                    <div class="placeholder">Auto<br>Repair</div>
                </div>
                <div class="business-logo">
                    <div class="placeholder">Dental<br>Office</div>
                </div>
                <div class="business-logo">
                    <div class="placeholder">Hair<br>Salon</div>
                </div>
                <div class="business-logo">
                    <div class="placeholder">Insurance<br>Agency</div>
                </div>
                <div class="business-logo">
                    <div class="placeholder">Real Estate<br>Office</div>
                </div>
            </div>
        </div>
    </section>
    
    <script>
        // Load team data and populate the page
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const teamId = urlParams.get('team_id') || '1';
            const playerId = urlParams.get('player_id') || '1';
            
            // Load team events
            loadTeamEvents(teamId);
            
            // Load local businesses carousel
            loadLocalBusinesses(teamId);
        });
        
        async function loadTeamEvents(teamId) {
            try {
                const response = await fetch(`/api/v1/teams/${teamId}/events`);
                const events = await response.json();
                
                const eventsGrid = document.getElementById('eventsGrid');
                eventsGrid.innerHTML = events.map(event => `
                    <div class="event-card">
                        <div class="event-date">${formatDate(event.start_datetime)}</div>
                        <div class="event-title">${event.title}</div>
                        <div class="event-details">${event.description || ''}</div>
                        <div class="event-location">üìç ${event.location_name || 'TBD'}</div>
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading events:', error);
            }
        }
        
        async function loadLocalBusinesses(teamId) {
            try {
                const response = await fetch(`/api/v1/local/carousel?team_id=${teamId}&limit=10`);
                const businesses = await response.json();
                
                const carousel = document.getElementById('businessesCarousel');
                carousel.innerHTML = businesses.map(business => `
                    <div class="business-logo" onclick="openLocalDirectory(${business.id})">
                        ${business.logo_url ? 
                            `<img src="${business.logo_url}" alt="${business.company_name}">` :
                            `<div class="placeholder">${business.company_name}</div>`
                        }
                    </div>
                `).join('');
            } catch (error) {
                console.error('Error loading businesses:', error);
            }
        }
        
        function openLocalDirectory(businessId) {
            const urlParams = new URLSearchParams(window.location.search);
            const teamId = urlParams.get('team_id') || '1';
            window.location.href = `/local/directory?team_id=${teamId}&business_id=${businessId}`;
        }
        
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        }
    </script>
</body>
</html>
